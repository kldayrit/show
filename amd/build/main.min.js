define("block_tulad/main",["jquery"],(function(t){const n=["the","is","in","a","an","at","from"];function r(t){return t.toLowerCase().match(/\b\w+\b/g).filter((t=>!n.includes(t)))}function o(t){const n={},o=r(t);for(const t of o)n[t]=(n[t]||0)+1;const c=o.length,s={};for(const t in n)s[t]=n[t]/c;return s}function c(t,n){const r={};for(const o in t)r[o]=t[o]*n[o];return r}function s(t){let n=0;for(const r in t)n+=t[r]**2;return Math.sqrt(n)}function e(t,n,r){const e=o(t),i=o(n),a=c(e,r),l=c(i,r);return function(t,n){let r=0;for(const o in t)n.hasOwnProperty(o)&&(r+=t[o]*n[o]);return r}(a,l)/(s(a)*s(l))}function i(t,n){if((t=t.replace(/\s+/g,""))===(n=n.replace(/\s+/g,"")))return 1;if(t.length<2||n.length<2)return 0;let r=new Map;for(let n=0;n<t.length-1;n++){const o=t.substring(n,n+2),c=r.has(o)?r.get(o)+1:1;r.set(o,c)}let o=0;for(let t=0;t<n.length-1;t++){const c=n.substring(t,t+2),s=r.has(c)?r.get(c):0;s>0&&(r.set(c,s-1),o++)}return 2*o/(t.length+n.length-2)}function a(t,n){if(!function(t,n){return"string"==typeof t&&(!!Array.isArray(n)&&(!!n.length&&!n.find((function(t){return"string"!=typeof t}))))}(t,n))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const r=[];let o=0;for(let c=0;c<n.length;c++){const s=n[c],e=i(t,s);r.push({target:s,rating:e}),e>r[o].rating&&(o=c)}return{ratings:r,bestMatch:r[o],bestMatchIndex:o}}return{initialize:function(){t(".check").bind("click",(function(){var n=t(this).attr("value").split("||"),o=n[0];n.shift();var c=a(n[o],n.filter((function(t){return n.indexOf(t)!=o}))).ratings;t("tr").css("background-color",""),t("."+o).css("background-color",""),t("#"+o).closest("tr").css("background-color","rgb(219, 255, 219)");for(let r=0;r<n.length;r++)t("."+r).html("--");c.forEach((function(r){r.rating>.6?t("."+n.indexOf(r.target)).css("background-color","rgb(255, 189, 182)"):t("."+n.indexOf(r.target)).css("background-color",""),t("."+n.indexOf(r.target)).html(Math.round(100*r.rating*100)/100+"% similar")}));const s=function(t){const n={},o=t.length;for(const o of t){const t=r(o);for(const r of t)n[r]=(n[r]||0)+1}const c={};for(const t in n)c[t]=Math.log(o/(n[t]+1));return c}(n),i=n[o];for(let r=0;r<n.length;r++){if(t(".sem"+r).css("background-color",""),r==o){t(".sem"+r).html("--");continue}const c=e(i,n[r],s);isNaN(c)&&(c=0),c>.6&&t(".sem"+r).css("background-color","rgb(255, 189, 182)"),t(".sem"+r).html(Math.round(100*c*100)/100+"% similar")}})),t(".checka").bind("click",(function(){var n=t(this).attr("value").split("||"),o=n[0];n.shift();var c=a(n[o],n.filter((function(t){return n.indexOf(t)!=o}))).ratings;t("tr").css("background-color",""),t(".a"+o).css("background-color",""),t("#a"+o).closest("tr").css("background-color","rgb(219, 255, 219)");for(let r=0;r<n.length;r++)t(".a"+r).html("--");c.forEach((function(r){r.rating>.6?t(".a"+n.indexOf(r.target)).css("background-color","rgb(255, 189, 182)"):t(".a"+n.indexOf(r.target)).css("background-color",""),t(".a"+n.indexOf(r.target)).html(Math.round(100*r.rating*100)/100+"% similar")}));const s=function(t){const n={},o=t.length;for(const o of t){const t=r(o);for(const r of t)n[r]=(n[r]||0)+1}const c={};for(const t in n)c[t]=Math.log(o/(n[t]+1));return c}(n),i=n[o];for(let r=0;r<n.length;r++){if(t(".asem"+r).css("background-color",""),r==o){t(".asem"+r).html("--");continue}const c=e(i,n[r],s);isNaN(c)&&(c=0),c>.6&&t(".asem"+r).css("background-color","rgb(255, 189, 182)"),t(".asem"+r).html(Math.round(100*c*100)/100+"% similar")}}))}}}));